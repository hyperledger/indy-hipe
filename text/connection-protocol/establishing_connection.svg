<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="893px" preserveAspectRatio="none" style="width:1215px;height:893px;" version="1.1" viewBox="0 0 1215 893" width="1215px" zoomAndPan="magnify"><defs><filter height="300%" id="frnuntw7xqa2z" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="545" x2="545" y1="86.4883" y2="806.2207"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="673.5" x2="673.5" y1="86.4883" y2="806.2207"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="526" y="83.5352">Alice</text><ellipse cx="545.5" cy="13" fill="#FFFFFF" filter="url(#frnuntw7xqa2z)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M545.5,21 L545.5,48 M532.5,29 L558.5,29 M545.5,48 L532.5,63 M545.5,48 L558.5,63 " fill="none" filter="url(#frnuntw7xqa2z)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="526" y="818.7559">Alice</text><ellipse cx="545.5" cy="831.709" fill="#FFFFFF" filter="url(#frnuntw7xqa2z)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M545.5,839.709 L545.5,866.709 M532.5,847.709 L558.5,847.709 M545.5,866.709 L532.5,881.709 M545.5,866.709 L558.5,881.709 " fill="none" filter="url(#frnuntw7xqa2z)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="657.5" y="83.5352">Bob</text><ellipse cx="673.5" cy="13" fill="#FFFFFF" filter="url(#frnuntw7xqa2z)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M673.5,21 L673.5,48 M660.5,29 L686.5,29 M673.5,48 L660.5,63 M673.5,48 L686.5,63 " fill="none" filter="url(#frnuntw7xqa2z)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="657.5" y="818.7559">Bob</text><ellipse cx="673.5" cy="831.709" fill="#FFFFFF" filter="url(#frnuntw7xqa2z)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M673.5,839.709 L673.5,866.709 M660.5,847.709 L686.5,847.709 M673.5,866.709 L660.5,881.709 M673.5,866.709 L686.5,881.709 " fill="none" filter="url(#frnuntw7xqa2z)" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="661.5,153.7646,671.5,157.7646,661.5,161.7646,665.5,157.7646" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="545.5" x2="667.5" y1="157.7646" y2="157.7646"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="552.5" y="153.333">invite</text><rect fill="#FFFFFF" filter="url(#frnuntw7xqa2z)" height="99" style="stroke: #A80036; stroke-width: 1.0;" width="197" x="343" y="101.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="347" y="118.0566">endpoint information</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="375" y="133.3672">endpoint did</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="391" y="148.6777">or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="375" y="163.9883">endpoint uri</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="375" y="179.2988">endpoint key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="347" y="194.6094">connection key (one time use)</text><polygon fill="#A80036" points="556.5,317.2148,546.5,321.2148,556.5,325.2148,552.5,321.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="550.5" x2="672.5" y1="321.2148" y2="321.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="562.5" y="316.7832">request</text><rect fill="#FFFFFF" filter="url(#frnuntw7xqa2z)" height="207" style="stroke: #A80036; stroke-width: 1.0;" width="526" x="678" y="211.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="682" y="227.9199">anon_crypted(endpoint_key, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="502" x="698" y="243.2305">@type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/routing/1.0/forward_to_key",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="698" y="258.541">key: connection key (one time use),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="698" y="273.8516">content: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="483" x="714" y="289.1621">@type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/connections/1.0/request",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="714" y="304.4727">key: connection key (one time use),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="714" y="319.7832">content: auth_crypted(connection key, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="730" y="335.0938">did: // did on a public ledger</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="746" y="350.4043">or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="730" y="365.7148">did_doc:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="714" y="381.0254">})</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="698" y="396.3359">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="682" y="411.6465">})</text><polygon fill="#A80036" points="661.5,534.252,671.5,538.252,661.5,542.252,665.5,538.252" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="545.5" x2="667.5" y1="538.252" y2="538.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="552.5" y="533.8203">response</text><rect fill="#FFFFFF" filter="url(#frnuntw7xqa2z)" height="207" style="stroke: #A80036; stroke-width: 1.0;" width="533" x="8" y="428.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="12" y="444.957">anon_crypted(endpoint_key, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="453" x="28" y="460.2676">@type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/routing/1.0/forward",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="28" y="475.5781">to: "ABC",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="28" y="490.8887">content: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="493" x="44" y="506.1992">@type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/connections/1.0/response",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="44" y="521.5098">to: "did:sov:ABC",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="44" y="536.8203">content: auth_crypted("123", {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="60" y="552.1309">did: // did on a public ledger</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="76" y="567.4414">or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="60" y="582.752">did_doc:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="44" y="598.0625">})</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="28" y="613.373">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="12" y="628.6836">})</text><polygon fill="#A80036" points="556.5,720.668,546.5,724.668,556.5,728.668,552.5,724.668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="550.5" x2="672.5" y1="724.668" y2="724.668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="562.5" y="720.2363">future messages</text><rect fill="#FFFFFF" filter="url(#frnuntw7xqa2z)" height="145" style="stroke: #A80036; stroke-width: 1.0;" width="477" x="678" y="645.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="682" y="661.9941">anon_crypted(endpoint_key, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="453" x="698" y="677.3047">@type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/routing/1.0/forward",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="698" y="692.6152">to: "ABC",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="698" y="707.9258">content: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="714" y="723.2363">@type: ,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="714" y="738.5469">from: "did:sov:ABC",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="714" y="753.8574">content: auth_crypted( , )</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="698" y="769.168">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="682" y="784.4785">})</text><!--
@startuml
actor Alice #white
actor Bob #white

Alice - -> Bob : invite
rnote left #white
endpoint information
       endpoint did
           or
       endpoint uri
       endpoint key
connection key (one time use)
end note

Bob - -> Alice: request
rnote right #white
anon_crypted(endpoint_key, {
    @type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/routing/1.0/forward_to_key",
    key: connection key (one time use),
    content: {
        @type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/connections/1.0/request",
        key: connection key (one time use),
        content: auth_crypted(connection key, {
            did: // did on a public ledger
                or
            did_doc:
        })
    }
})
end note
Alice - -> Bob: response
rnote left #white
anon_crypted(endpoint_key, {
    @type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/routing/1.0/forward",
    to: "ABC",
    content: {
        @type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/connections/1.0/response",
        to: "did:sov:ABC",
        content: auth_crypted("123", {
            did: // did on a public ledger
                or
            did_doc:
        })
    }
})
end note

Bob - -> Alice: future messages
rnote right #white
anon_crypted(endpoint_key, {
    @type: "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/routing/1.0/forward",
    to: "ABC",
    content: {
        @type: ,
        from: "did:sov:ABC",
        content: auth_crypted( , )
    }
})
end note
@enduml

PlantUML version 1.2018.01(Sun Jan 28 11:08:22 MST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b39
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>