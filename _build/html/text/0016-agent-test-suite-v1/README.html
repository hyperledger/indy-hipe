

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HIPE 0016-agent-test-suite-v1 &mdash; Indy Project Enhancements  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Indy Project Enhancements
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../0011-cred-revocation/README.html">HIPE 0011-cred-revocation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0011-cred-revocation/README.html#motivation">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0011-cred-revocation/README.html#tutorial">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0011-cred-revocation/README.html#reference">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0011-cred-revocation/README.html#drawbacks">Drawbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0011-cred-revocation/README.html#rationale-and-alternatives">Rationale and alternatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0011-cred-revocation/README.html#prior-art">Prior art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0011-cred-revocation/README.html#unresolved-questions">Unresolved questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0012-concurrency-improvement/README.html">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0012-concurrency-improvement/README.html#motivation">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0012-concurrency-improvement/README.html#tutorial">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0012-concurrency-improvement/README.html#reference">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0012-concurrency-improvement/README.html#drawbacks">Drawbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0012-concurrency-improvement/README.html#rationale-and-alternatives">Rationale and alternatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0012-concurrency-improvement/README.html#prior-art">Prior art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0012-concurrency-improvement/README.html#unresolved-questions">Unresolved questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Indy Project Enhancements</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>HIPE 0016-agent-test-suite-v1</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/text/0016-agent-test-suite-v1/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <ul class="simple">
<li>Name: agent-test-suite-v1</li>
<li>Author: Daniel Hardman</li>
<li>Start Date: 2018-05-17</li>
<li>HIPE PR: (leave this empty)</li>
<li>Jira Issue: (leave this empty)</li>
</ul>
<div class="section" id="hipe-0016-agent-test-suite-v1">
<span id="hipe-0016-agent-test-suite-v1"></span><h1>HIPE 0016-agent-test-suite-v1<a class="headerlink" href="#hipe-0016-agent-test-suite-v1" title="Permalink to this headline">¶</a></h1>
<p>Defines the content and implementation of a test suite that evaluates
interoperability of Indy agents.</p>
<div class="section" id="related-hipes">
<span id="related-hipes"></span><h2>Related HIPEs<a class="headerlink" href="#related-hipes" title="Permalink to this headline">¶</a></h2>
<p>This is a test suite <strong>content HIPE</strong>. It is intended to satisfy
the common behavioral contract defined in a seprate test suite
<strong>interface HIPE</strong>. (These two types of spec are divided so they
can be versioned and standardized separately.)</p>
<p><img alt="interface HIPEs vs. content HIPEs" src="../../_images/interface-and-content1.png" /></p>
</div>
</div>
<div class="section" id="reference">
<span id="reference"></span><h1>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h1>
<p>What follows is a list of tests, organized into <strong>feature clusters</strong>,
to exercise the interoperability of agents. Each test has a canonical
name and a description that describes how an agent passes the test.</p>
<p>A reference implementation of this suite is attached to the HIPE;
see <a class="reference external" href="text/0016-agent-test-suite-v1/suite.py">suite.py</a>.</p>
<div class="section" id="feature-clusters">
<span id="feature-clusters"></span><h2>Feature Clusters<a class="headerlink" href="#feature-clusters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="core-passive">
<span id="core-passive"></span><h3>core.passive<a class="headerlink" href="#core-passive" title="Permalink to this headline">¶</a></h3>
<p>This is the most basic feature cluster in the test suite; it tests
that agents listening passively understand messages that they receive,
and that they respond in expected ways.</p>
<div class="section" id="core-passive-report-recognized-interop">
<span id="core-passive-report-recognized-interop"></span><h4>core.passive.report_recognized_interop<a class="headerlink" href="#core-passive-report-recognized-interop" title="Permalink to this headline">¶</a></h4>
<p>Upon receiving an auth_crypt’ed <a class="reference external" href="text/agent-test-suite-interface/README.md#agent-metadata-request">message of type <code class="docutils literal notranslate"><span class="pre">agent-metadata-request</span></code></a>, where the type of requested metadata is an <a class="reference external" href="text/agent-test-suite-interface/README.md#interop-profile-json">interop profile</a> and the URI of the interop profile is the URI of this HIPE,
reply with a valid interop profile.</p>
<blockquote>
(Should we have an anon_crypt'ed variant of this test? Different agents
may make different decisions about whether to report interop to anonymous
versus authenticated parties...)<p>(Should we topicalize the metadata request, and then test topicalized response?)</p>
</blockquote></div>
<div class="section" id="core-passive-report-unrecognized-interop">
<span id="core-passive-report-unrecognized-interop"></span><h4>core.passive.report_unrecognized_interop<a class="headerlink" href="#core-passive-report-unrecognized-interop" title="Permalink to this headline">¶</a></h4>
<p>Upon receiving a <a class="reference external" href="text/agent-test-suite-interface/README.md#agent-metadata-request">message of type <code class="docutils literal notranslate"><span class="pre">agent-metadata-request</span></code></a>, where the type of requested metadata is an <a class="reference external" href="text/agent-test-suite-interface/README.md#interop-profile-json">interop profile</a> and the URI of the interop profile is <code class="docutils literal notranslate"><span class="pre">http://example.com/no-such-URI</span></code>,
reply with an empty interop profile, indicating that the agent
provides nothing but divergence from any test suite at that URI.</p>
</div>
<div class="section" id="core-passive-reply-with-error">
<span id="core-passive-reply-with-error"></span><h4>core.passive.reply_with_error<a class="headerlink" href="#core-passive-reply-with-error" title="Permalink to this headline">¶</a></h4>
<p>Upon receiving a message of an unrecognized type, reply with a graceful
error using error code E_UNRECOGNIZED_MESSAGE_TYPE.</p>
</div>
<div class="section" id="core-passive-trust-ping">
<span id="core-passive-trust-ping"></span><h4>core.passive.trust_ping<a class="headerlink" href="#core-passive-trust-ping" title="Permalink to this headline">¶</a></h4>
<p>Upon receiving a message of type <code class="docutils literal notranslate"><span class="pre">trust-ping</span></code>, reply with a message of
type <code class="docutils literal notranslate"><span class="pre">trust-ping-response</span></code>.</p>
</div>
<div class="section" id="core-passive-new-connection-request-accept">
<span id="core-passive-new-connection-request-accept"></span><h4>core.passive.new_connection_request_accept<a class="headerlink" href="#core-passive-new-connection-request-accept" title="Permalink to this headline">¶</a></h4>
<p>Test fixture sends <a class="reference external" href="text/agent-test-suite-interface/README.md#setup-and-teardown">setup instructions over the <code class="docutils literal notranslate"><span class="pre">agact</span></code> backchannel</a> that look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;on-next-message&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;connection-request&quot;</span><span class="p">:</span> <span class="s2">&quot;accept&quot;</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This tells the agent to accept the next connection request–or to at least
pretend to, for the purpose of the test.</p>
<p>Once preconfigured in this way, upon receiving an anon_crypt’ed message of
type <code class="docutils literal notranslate"><span class="pre">connection-request</span></code>, reply with a message of type <code class="docutils literal notranslate"><span class="pre">connection-accepted</span></code>.</p>
</div>
<div class="section" id="core-passive-new-connection-request-reject">
<span id="core-passive-new-connection-request-reject"></span><h4>core.passive.new_connection_request_reject<a class="headerlink" href="#core-passive-new-connection-request-reject" title="Permalink to this headline">¶</a></h4>
<p>Test fixture sends <a class="reference external" href="text/agent-test-suite-interface/README.md#setup-and-teardown">setup instructions over the <code class="docutils literal notranslate"><span class="pre">agact</span></code> backchannel</a> that look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;on-next-message&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;connection-request&quot;</span><span class="p">:</span> <span class="s2">&quot;accept&quot;</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once setup, upon receiving an anon_crypt’ed message of type <code class="docutils literal notranslate"><span class="pre">connection-request</span></code>,
reply with a message of type <code class="docutils literal notranslate"><span class="pre">connection-rejected</span></code>.</p>
</div>
<div class="section" id="core-passive-redundant-connection-request-reject">
<span id="core-passive-redundant-connection-request-reject"></span><h4>core.passive.redundant_connection_request_reject<a class="headerlink" href="#core-passive-redundant-connection-request-reject" title="Permalink to this headline">¶</a></h4>
<blockquote>
(Send a connection request that's redundant because we already have a
connection to the requesting party. Do we need this? If so, what should
be the defined behavior?)
</blockquote></div>
</div>
<div class="section" id="core-active">
<span id="core-active"></span><h3>core.active<a class="headerlink" href="#core-active" title="Permalink to this headline">¶</a></h3>
<div class="section" id="core-active-trust-ping-anon">
<span id="core-active-trust-ping-anon"></span><h4>core.active.trust_ping_anon<a class="headerlink" href="#core-active-trust-ping-anon" title="Permalink to this headline">¶</a></h4>
<p>Send a trust ping that’s anon_encrypt’ed.</p>
</div>
<div class="section" id="core-active-trust-ping-authenticated">
<span id="core-active-trust-ping-authenticated"></span><h4>core.active.trust_ping_authenticated<a class="headerlink" href="#core-active-trust-ping-authenticated" title="Permalink to this headline">¶</a></h4>
<p>Send a trust ping that’s auth_encrypt’ed.</p>
</div>
<div class="section" id="core-active-new-connection-request">
<span id="core-active-new-connection-request"></span><h4>core.active.new_connection_request<a class="headerlink" href="#core-active-new-connection-request" title="Permalink to this headline">¶</a></h4>
<p>Send a connection request.</p>
</div>
<div class="section" id="core-active-request-recognized-interop">
<span id="core-active-request-recognized-interop"></span><h4>core.active.request_recognized_interop<a class="headerlink" href="#core-active-request-recognized-interop" title="Permalink to this headline">¶</a></h4>
<p>Send an interop request for this test suite.</p>
</div>
</div>
<div class="section" id="cred">
<span id="cred"></span><h3>cred<a class="headerlink" href="#cred" title="Permalink to this headline">¶</a></h3>
<blockquote>
This suite probably has to be subdivided by role (issuer, holder),
and by active vs. passive.
</blockquote><div class="section" id="cred-cred-offer-free">
<span id="cred-cred-offer-free"></span><h4>cred.cred_offer_free<a class="headerlink" href="#cred-cred-offer-free" title="Permalink to this headline">¶</a></h4>
<p>Offer a credential that has no price.</p>
</div>
<div class="section" id="cred-issue-free">
<span id="cred-issue-free"></span><h4>cred.issue_free<a class="headerlink" href="#cred-issue-free" title="Permalink to this headline">¶</a></h4>
<p>Issue a credential that has no price.</p>
</div>
<div class="section" id="cred-deny-issue-bad-proof-of-correctness">
<span id="cred-deny-issue-bad-proof-of-correctness"></span><h4>cred.deny_issue_bad_proof_of_correctness<a class="headerlink" href="#cred-deny-issue-bad-proof-of-correctness" title="Permalink to this headline">¶</a></h4>
<p>Refuse to issue a credential because requester doesn’t prove correctness
(tries to embed data that issuer doesn’t want to allow).</p>
</div>
<div class="section" id="cred-deny-issue-unpaid">
<span id="cred-deny-issue-unpaid"></span><h4>cred.deny_issue_unpaid<a class="headerlink" href="#cred-deny-issue-unpaid" title="Permalink to this headline">¶</a></h4>
<p>Refuse to issue a credential because requester hasn’t paid for it.</p>
</div>
<div class="section" id="cred-request-credential-free">
<span id="cred-request-credential-free"></span><h4>cred.request_credential_free<a class="headerlink" href="#cred-request-credential-free" title="Permalink to this headline">¶</a></h4>
<p>Provide a correct cred request to enable issuance.</p>
</div>
<div class="section" id="cred-negotiate-price">
<span id="cred-negotiate-price"></span><h4>cred.negotiate_price<a class="headerlink" href="#cred-negotiate-price" title="Permalink to this headline">¶</a></h4>
<p>Dicker on price of issued credentials.</p>
</div>
<div class="section" id="cred-negotiate-terms">
<span id="cred-negotiate-terms"></span><h4>cred.negotiate_terms<a class="headerlink" href="#cred-negotiate-terms" title="Permalink to this headline">¶</a></h4>
<p>Dicker on terms of credential use.</p>
</div>
<div class="section" id="cred-negotiate-content">
<span id="cred-negotiate-content"></span><h4>cred.negotiate_content<a class="headerlink" href="#cred-negotiate-content" title="Permalink to this headline">¶</a></h4>
<p>Dicker on content of offered credential.</p>
</div>
</div>
<div class="section" id="proof">
<span id="proof"></span><h3>proof<a class="headerlink" href="#proof" title="Permalink to this headline">¶</a></h3>
<blockquote>
This suite probably has to be subdivided by role (prover, verifier),
and by active vs. passive.
</blockquote><div class="section" id="proof-proof-offer">
<span id="proof-proof-offer"></span><h4>proof.proof_offer<a class="headerlink" href="#proof-proof-offer" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="proof-active-present-valid">
<span id="proof-active-present-valid"></span><h4>proof.active.present_valid<a class="headerlink" href="#proof-active-present-valid" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="proof-passive-accept-presented">
<span id="proof-passive-accept-presented"></span><h4>proof.passive.accept_presented<a class="headerlink" href="#proof-passive-accept-presented" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="proof-passive-rejected-presented">
<span id="proof-passive-rejected-presented"></span><h4>proof.passive.rejected_presented<a class="headerlink" href="#proof-passive-rejected-presented" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="proof-active-present-invalid">
<span id="proof-active-present-invalid"></span><h4>proof.active.present_invalid<a class="headerlink" href="#proof-active-present-invalid" title="Permalink to this headline">¶</a></h4>
<p>Present a proof that doesn’t match the requested criteria.</p>
</div>
<div class="section" id="proof-deny-issue-bad-proof-of-correctness">
<span id="proof-deny-issue-bad-proof-of-correctness"></span><h4>proof.deny_issue_bad_proof_of_correctness<a class="headerlink" href="#proof-deny-issue-bad-proof-of-correctness" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="proof-deny-issue-unpaid">
<span id="proof-deny-issue-unpaid"></span><h4>proof.deny_issue_unpaid<a class="headerlink" href="#proof-deny-issue-unpaid" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="proof-request-proof-possible">
<span id="proof-request-proof-possible"></span><h4>proof.request_proof_possible<a class="headerlink" href="#proof-request-proof-possible" title="Permalink to this headline">¶</a></h4>
<p>As verifier, ask for proof that’s reasonable, that the prover can satisfy.</p>
</div>
<div class="section" id="proof-request-proof-possible">
<span id="id1"></span><h4>proof.request_proof_possible<a class="headerlink" href="#proof-request-proof-possible" title="Permalink to this headline">¶</a></h4>
<p>As verifier, ask for proof that’s unreasonable, that the prover can’t satisfy.</p>
</div>
<div class="section" id="proof-negotiate-content">
<span id="proof-negotiate-content"></span><h4>proof.negotiate_content<a class="headerlink" href="#proof-negotiate-content" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="proof-negotiate-terms">
<span id="proof-negotiate-terms"></span><h4>proof.negotiate_terms<a class="headerlink" href="#proof-negotiate-terms" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
</div>
<div class="section" id="drawbacks">
<span id="drawbacks"></span><h1>Drawbacks<a class="headerlink" href="#drawbacks" title="Permalink to this headline">¶</a></h1>
<p>Why should we <em>not</em> do this?</p>
</div>
<div class="section" id="rationale-and-alternatives">
<span id="rationale-and-alternatives"></span><h1>Rationale and alternatives<a class="headerlink" href="#rationale-and-alternatives" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Why is this design the best in the space of possible designs?</li>
<li>What other designs have been considered and what is the rationale for not choosing them?</li>
<li>What is the impact of not doing this?</li>
</ul>
</div>
<div class="section" id="prior-art">
<span id="prior-art"></span><h1>Prior art<a class="headerlink" href="#prior-art" title="Permalink to this headline">¶</a></h1>
<p>Discuss prior art, both the good and the bad, in relation to this proposal.
A few examples of what this can include are:</p>
<ul class="simple">
<li>Does this feature exist in other SSI ecosystems and what experience have their community had?</li>
<li>For other teams: What lessons can we learn from other attempts?</li>
<li>Papers: Are there any published papers or great posts that discuss this? If you have some relevant papers to refer to, this can serve as a more detailed theoretical background.</li>
</ul>
<p>This section is intended to encourage you as an author to think about the lessons from other
implementers, provide readers of your HIPE with a fuller picture.
If there is no prior art, that is fine - your ideas are interesting to us whether they are brand new or if it is an adaptation from other languages.</p>
<p>Note that while precedent set by other ecosystems is some motivation, it does not on its own motivate an HIPE.
Please also take into consideration that Indy sometimes intentionally diverges from common identity features.</p>
</div>
<div class="section" id="unresolved-questions">
<span id="unresolved-questions"></span><h1>Unresolved questions<a class="headerlink" href="#unresolved-questions" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>What parts of the design do you expect to resolve through the HIPE process before this gets merged?</li>
<li>What parts of the design do you expect to resolve through the implementation of this feature before stabilization?</li>
<li>What related issues do you consider out of scope for this HIPE that could be addressed in the future independently of the solution that comes out of this HIPE?</li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Hyperledger Indy

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>